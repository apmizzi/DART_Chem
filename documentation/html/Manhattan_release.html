<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>DART Manhattan Release Notes</title>
<link rel="stylesheet" type="text/css" href="doc.css" />
<link href="../images/dart.ico" rel="shortcut icon" />
</head>
<body>
<a name="TOP"></a>

<h1>DART Manhattan Release Notes</h1>

<table border=0 summary="" cellpadding=5>
<tr>
    <td valign=middle>
    <img src="../images/Dartboard7.png" alt="DART project logo" height=70 />
    </td>
    <td>
       <p>Jump to DART Documentation Main Index 
       <a href="https://svn-dares-dart.cgd.ucar.edu/DART/branches/rma_trunk/documentation/index.html">Website</a>  
       or <a href="../index.html">local file</a><br />
          <small><small>version information for this file: <br />
          <!-- version tag follows, do not edit -->
          $Id: documentation/html/Manhattan_release.html 10979 2017-02-01 20:07:34Z thoar@ucar.edu $</small></small>
       </p></td>
</tr>
</table>

<a href="#Overview">Dart Overview</a> /
<!-- <a href="#GettingStarted">Getting Started</a> / -->
<!-- <a href="#Installation">Installation</a> / -->
<a href="#CurrentUsers">Notes for Current Users</a> /
<a href="#Nonbackward">Non-backwards Compatible Changes</a> /
<a href="#NewFeatures">New Features</a> /
<a href="#NewModels">New Models</a> /
<a href="#ChangedModels">Changed Models</a> /
<a href="#NewFOs">New Forward Operators</a> /
<a href="#NewObs">New Observations</a> /
<a href="#NewDiagnostics">New Diagnostics and Documentation</a> /
<a href="#NewUtilities">New Utilities</a> /
<a href="#KnownProblems">Known Problems</a> /
<a href="#Legalese">Terms of Use</a>

<!--==================================================================-->

<a name="Overview"></a>
<h2>Dart Overview</h2>

<p>The Data Assimilation Research Testbed (DART) is designed to
facilitate the combination of assimilation algorithms, models,
and real (or synthetic) observations to allow
increased understanding of all three.
The DART programs are highly portable, having been
compiled with many Fortran 90 compilers
and run on linux compute-servers, linux clusters, OSX laptops/desktops,
SGI Altix clusters, supercomputers running AIX, and more.
Read the 
<a href="#customizations">Customizations</a> section
for help in building on new platforms.</p>

<p>
DART employs a modular programming approach to apply an Ensemble Kalman Filter
which adjusts model values toward a state that is more consistent with information
from a set of observations. Models may be swapped in and out, as can
different algorithms in the Ensemble Kalman Filter. The method
requires running multiple instances of a model to generate an ensemble of
states. A forward operator appropriate for the type of observation being assimilated
is applied to each of the states to generate the model's estimate of the observation.
Comparing these estimates and their uncertainty to the observation and
its uncertainty ultimately results in the adjustments to the model states.
See the DARTLAB demos or read more in the tutorials included with the
DART distribution.  They are described below.</p>

<p>
DART diagnostic output were <i>previously</i> stored in two netCDF files containing 
the model states just before the adjustment (<em class=file>Prior_Diag.nc</em>) and 
just after the adjustment (<em class=file>Posterior_Diag.nc</em>). These files are
now separated into multiple files in order to take advantage of parallel IO. In 
particular <em class=file>Prior_Diag.nc</em> is broken up into files:
  <ul><li> <em class=file>preassim_member_####.nc</em></li>
      <li> <em class=file>preassim_mean.nc</em></li>
      <li> <em class=file>preassim_sd.nc</em></li>
      <li> <em class=file>preassim_priorinf_{mean,sd}.nc</em> (if prior inflation is turned on)</li>
      <li> <em class=file>preassim_postinf_{mean,sd}.nc</em> (if posterior inflation is turned on)</li>
  </ul>
and similarly for <em class=file>Posterior_Diag.nc</em> :
  <ul><li> <em class=file>postassim_member_####.nc</em></li>
      <li> <em class=file>postassim_mean.nc</em></li>
      <li> <em class=file>postassim_sd.nc</em></li>
      <li> <em class=file>postassim_priorinf_{mean,sd}.nc</em> (if prior inflation is turned on)</li>
      <li> <em class=file>postassim_postinf_{mean,sd}.nc</em> (if posterior inflation is turned on)</li>
  </ul>
There is also a text file, <em class=file>obs_seq.final</em>, with the model estimates of the 
observations.  There is a suite of Matlab&reg; functions that facilitate exploration of the
results, but the netCDF files are inherently portable and contain all the
necessary metadata to interpret the contents with other analysis programs
such as NCL, R, etc.
</p>

<p>In this document links are available which point to Web-based documentation
files and also to the same information in html files distributed with DART.
If you have used subversion to check out a local copy of the DART files you
can open this file in a browser by loading 
<em class=file>DART/documentation/html/Manhattan_release.html</em>
and then use the <em class=file>local file</em> links to see 
other documentation pages without requiring a connection to
the internet.
If you are looking at this documentation from
the <em class=file>www.image.ucar.edu</em> web server or you are
connected to the internet you can use the 
<em class=file>Website</em> links to view other documentation pages.
</p>

<p>To get started running with lorenz 63 model refer to
<a href="Manhattan_getting_started.html">Getting Started</a> 
</p>

<a name="CurrentUsers"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>Notes for Current Users</h2>

<p>
If you have been updating from the development branch of the DART subversion
repository you will not notice much difference between that
and the Manhattan release.  If you are still running the Kodiak
release there are many new models, new observation types,
capabilities in the assimilation tools, new diagnostics, and
new utilities.  There is a short list of non-backwards
compatible changes
(<a href="#Nonbackward">see below</a>), and then a long list
of new options and functions.
</p>

<p>
In the near future we will be making substantial changes to
the internal structure of DART to accomodate both larger
models and machines with thousands of processors.  We will
continue to maintain the Manhattan release with bug fixes, but
we will be updating the subversion trunk with new and
non-backwards-compatible code.
Checking out the Manhattan release branch and running 'svn update'
from time to time is the recommended way to update your
DART tree.
</p>

<!--==================================================================-->

<a name="Nonbackward"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>Non-backwards Compatible Changes</h2>

<p>
Changes in the Manhattan release (13 Dec 2013)
which are <em>not</em> backwards compatible
with the Kodiak release (30 June 2011):
</p>

<ol>

<li>The DART system uses a new random number generator based on
the Mersenne Twister algorithm from the GNU scientific library.
It is believed to have better behavior in general, and in particular
when it is frequently reseeded, as may be the case in some
perfect_model_obs experiments.  The seed in perfect_model_obs
is now based on the time-stamp associated with the data, so running
single advances as separate invocations of the executable will still
result in a good random distribution of the observation errors.
The seeds in several other places in the code have been changed so
they are more consistent in the face of different numbers of MPI
tasks when executing.  The random values should reproduce if an
identical run is repeated, but there are still a few places in the
code where changing the number of MPI tasks results in different
seeds being created for the random number generator, and so the
non-deterministic values will differ.</li>

<li>The WRF model_mod now interpolates in the vertical in log(pressure)
space instead of linear pressure space.  This is the new default.
There is a module global variable that can be set at compile time
to restore the previous behavior.</li>

<li>The POP model_mod used to interpolate sensible temperature observations
using a potential temperature field in the state vector.  The code now
correctly does the conversion from potential temperature to sensible (in-situ)
temperature during the forward operator process.</li>

<li>If your <em class=file>model_mod.f90</em> provides a customized 
<em class=code>get_close_obs()</em> routine that makes use of the 
types/kinds arguments for either the base location or the close location list,
there is an important change in this release.  The fifth
argument to the <em class=code>get_close_obs()</em> call is now a list of 
generic kinds corresponding to the location list.  The fourth argument to
the <em class=code>get_dist()</em> routine is now also a generic kind and
not a specific type.  In previous versions of the system the list
of close locations was sometimes a list of specific types and other
times a list of generic kinds. The system now
always passes generic kinds for the close locations list for consistency.
The base location and specific type remains the same as before.  If you
have a <em class=code>get_close_obs()</em> routine in your <em class=file>
model_mod.f90</em> file and have questions about usage, 
<a href="mailto:dart@ucar.edu">contact</a> the DART development team.</li>

<li>The <em class=program>obs_common_subset</em> program namelist has
changed.  The program compares <em class=file>obs_seq.final</em> files
that were produced by different runs of filter using the same input
obs_sequence file.  The old version supported comparing only 2 files
at a time; this version supports up to 50.  It also enforces the
implicit assumption that the incoming obs_seq.final files are identical
except for the DART QC and the obs values.</li>

<li>The simple_advection model was incorrectly calling the random number
generator initialization routines after generating some random numbers.
It now correctly initializes the generator before getting any random values.</li>

<li>The gts_to_dart converter now creates separate obs types for surface dewpoint 
vs obs aloft because they have different vertical coordinates.  The obs_diag
program (and other diagnostic routines) do not cope with the same obs type
having different vertical coordinates because it is trying to bin observations
in the vertical (it is unable to convert pressure to height after the fact, 
for example, or bin surface obs with a height with pressure obs).</li>

<li>Shell scripts which used to contain MSS (mass store) commands for
long-term archiving have been converted to call HSI (HPSS) commands.</li>

<li>The 'wrf_dart_obs_preprocess' program will now refuse to superob observations
which are too close to the poles.  If the superob radius includes either pole,
the computation of an average obs location becomes more complicated than the
existing code is prepared to deal with.  (If this case is of interest to you,
<a href="mailto:dart@ucar.edu">contact</a> the DART development team.  
We have ideas on how to implement this.)</li>

<li>The default namelist values for the 'obs_seq_to_netcdf' program has changed
so the default is a single large time bin, which means you don't have to know
the exact time extents when converting an obs_seq.final file into a netCDF file.
You can still set specific bins and get multiple netCDF files as output if
you prefer.</li>

<li>The tutorial files are now directly in the DART/tutorial directory and
no longer in separate subdirectories.</li>

<li>The default flags in the mkmf_template.XXX files have been updated to
be more consistent with current compiler versions.</li>

<li>The default work/input.nml namelists for Lorenz 63 and Lorenz 96 have
been changed to give good assimilation results by default.  Originally these
were set to work with a workshop tutorial in which the settings did not work
and as part of the tutorial they were changed to good values.  Now the
workshop versions of the namelists are separate and copied into place by
a workshop_setup script.</li>

<li>filter now calls the end_model() subroutine in the model_mod for
the first time.  It should have been called all along, but was not.</li>

<li>The 'rat_cri' namelist item has been removed from the &amp;obs_diag namelist.</li>

<li>The preprocess program has a new namelist item 'overwrite_output' and it
is .true. by default.  The program will no longer fail if the target
obs_kind_mod.f90 or obs_def_mod.f90 files exist but will silently overwrite them.
Set this namelist item to .false. to recover the previous behavior.</li>

</ol>

<!--==================================================================-->

<a name="NewFeatures"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>New Features</h2>

<ul>
<li>Customizable Outlier-Threshold Handling
    <ul><li>Filter contains code to compute whether an observation should
        not be assimilated because the forward operator mean is too different
        from the observation value.  This is done uniformly for all observation
        values and types.  To customize this computation (e.g. to allow all obs
        of a particular type to be assimilated without having to pass the outlier
        threshold test), there is a new namelist item 
        <em class=code>enable_special_outlier_code</em> in the &amp;filter_nml namelist
        that enables a call to a subroutine at the end of the filter.f90 source file.
        That subroutine can be customized by the user to do any computation required.
        See the filter namelist documentation 
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/filter/filter.html#Namelist">
        Website</a> or <a href="../../assimilation_code/programs/filter.html#Namelist">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>Fill inflation restart files
    <ul><li>There is a new utility that will write inflation restart files based on 
        values read from the console.  This enables multi-step runs to start with the
        'read inflation values from a file' option set to .true. for all steps instead of
        having to change the namelist after the first cycle.
        See the documentation
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/adaptive_inflate/fill_inflation_restart.html">Website</a> 
        or <a href="../../assimilation_code/programs/fill_inflation_restart.html">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>New location module options
    <ul><li>There are additional options for the model and observation coordinate systems.
        Note that only a single location option can be chosen and all observations and all
        model locations must use that coordinate system. New options include:
        <ul><li>Channel coordinate system</li>
        <li>[0-1] periodic 3D coordinate system</li>
        <li>X,Y,Z 3D Cartesian coordinate system</li>
        <li>2D annulus coordinate system</li>
        </ul>
        See the documentation
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/location/location_mod.html">Website</a> 
        or <a href="../../location/location_mod.html">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>Missing values in state
    <ul><li>In some models there are values which are not valid in all ensemble members.
        With this release there is limited support for this in DART.  There are still
        serious questions about what the correct results should be if the ensemble
        count for some state vector item is smaller than the total ensemble size.
        Nevertheless, with this release we have implemented support for missing
        state vector values in the CLM Land model.
        There is a new namelist item <em class=code>allow_missing_in_clm</em>
        in the &amp;assim_tools_nml namelist.  Setting this to .true. will allow DART to
        avoid updating any state vector items in which one or more of the ensemble members
        in CLM have a missing value.  Inflation will be disabled for any state vector
        items where one or more ensemble members have missing values. All CLM
        forward operators must test for and be prepared to return with a failed forward
        operator code if any of the interpolation items it requires are missing.
        See the documentation
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/assim_tools/assim_tools_mod.html#Namelist">Website</a> 
        or <a href="../../assimilation_code/modules/assimilation/assim_tools_mod.html#Namelist">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>Different task layout options
    <ul><li>The ensemble manager has a new option to distribute MPI tasks round robin
        across the available nodes instead of assigning them sequentially.  The first N
        tasks, where N is the ensemble size, require more memory than other tasks.
        Distributing them round-robin may allow assigning more tasks per node with a more
        uniform memory usage.  This may result in a small decrease in performance at runtime,
        but it might allow using fewer nodes for the job and thus reduce the job cost.
        See the documentation for the <em class=code>layout</em> and 
        <em class=code>tasks_per_node</em> in the &amp;ensemble_manager_nml namelist
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/assimilation_code/modules/utilities/ensemble_manager_mod.html#Namelist">Website</a> 
        or <a href="../../assimilation_code/modules/utilities/ensemble_manager_mod.html#Namelist">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>Different MPI communication options
    <ul><li>The ensemble manager has 3 new options for the order in which the
        communication is done when transposing the ensemble of state vectors.
        There is a new namelist option in the &amp;ensemble_manager_nml called
        <em class=code>communication_configuration</em> which can have the values 1-4.
        If DART is running slower than expected, try the various options and see
        which is fastest on your hardware.  The fastest value depends on the
        MPI library implementation, the type and speed of interconnect, the
        processor speed, and node memory size and so it is almost impossible 
        to recommend a value without doing timing tests on the target system.  
        See the documentation in the &amp;ensemble_manager_nml namelist
        <a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/assimilation_code/modules/utilities/ensemble_manager_mod.html#Namelist">Website</a> 
        or <a href="../../assimilation_code/modules/utilities/ensemble_manager_mod.html#Namelist">local file</a>
        for more details.</li></ul>
</li>
<br /> 

<li>Several more places where large arrays were put on the stack
have been removed, decreasing the total amount of stack required by DART.
</li>

</ul>


<!--==================================================================-->

<a name="NewModels"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>New Models</h2>


<ul>

<li>CESM framework components
<ul><li>DART now supports running CESM components CAM, POP, and CLM under the CESM framework.
Setup scripts are provided to configure a single or multiple component assimilation.
See:
<ul>
<li>
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/CESM/model_mod.html">Website</a> or
<a href="../../models/CESM/model_mod.html">local file</a> for multi-component assimilation, 
</li>
<li>
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/cam/model_mod.html">Website</a> or
<a href="../../models/cam/model_mod.html">local file</a> for CAM single component assimilation
</li>
<li>
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/POP/model_mod.html">Website</a> or
<a href="../../models/POP/model_mod.html">local file</a> for POP single component assimilation
</li>
<li>
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/clm/model_mod.html">Website</a> or
<a href="../../models/clm/model_mod.html">local file</a> for CLM single component assimilation
</li>
</ul>
Documentation for the model:
<ul>
<li>the user's guide for CESM version 1.1.1:<br />
 <a href="http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/book1.html">
 http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/book1.html</a>
</li> 
<li>the page that explains how to download the release code:<br />
  <a href="http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x388.html">
  http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x388.html</a>
</li>
<li>the web page that shows the names of the 'compsets' which are the
  configurations of the various models:<br />
   <a href="http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/compsets.html">
   http://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/compsets.html</a>
</li>
<li>list of recent CESM versions:<br />
    <a href="http://www2.cesm.ucar.edu/models/current">
    http://www2.cesm.ucar.edu/models/current</a>
</li></ul>
</li></ul>
</li>
<br /> 

<li>MPAS Atmosphere and Ocean Models
<ul><li>DART interface documentation for the MPAS Atmosphere component:
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/mpas_atm/model_mod.html">Website</a>
or
<a href="../../models/mpas_atm/model_mod.html">local file</a>.
<li>DART interface documentation for the MPAS Ocean component:
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/mpas_ocn/model_mod.html">Website</a> or
<a href="../../models/mpas_ocn/model_mod.html">local file</a>.
</li>
<li>Documentation for the model:
<a href="http://mpas-dev.github.io/"">MPAS</a>.
</li></ul>
</li>
<br /> 

<li>NOAH Land Model
<ul><li>Dart interface documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/noah/model_mod.html">Website</a>
or
<a href="../../models/noah/model_mod.html">local file</a>.</li>
<li>Documentation for the model:
<a href="http://www.ral.ucar.edu/research/land/technology/lsm.php">
The Community NOAH Land Surface Model (LSM)</a>.
</li></ul>
</li>
<br /> 

<li>NAAPS Aerosol Model
<ul><li>Dart interface documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/NAAPS/model_mod.html">Website</a>
or
<a href="../../models/NAAPS/model_mod.html">local file</a>.</li>
<li>Documentation for the model:
<a href="http://www.nrlmry.navy.mil/aerosol_web">NRL/Monterery Aerosol Model</a>.
</li></ul>
</li>
<br /> 

<li>GITM Global Ionosphere Thermosphere Model
<ul><li>Dart interface documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/GITM/model_mod.html">Website</a>
or
<a href="../../models/GITM/model_mod.html">local file</a>.</li>
<li>Documentation for the model:
<a href="http://ccmc.gsfc.nasa.gov/models/modelinfo.php?model=GITM">
GITM Web Pages</a>.
</li></ul>
</li>
<br /> 

<li>NOGAPS Global Atmosphere Model
<ul><li>Dart interface documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/NOGAPS/model_mod.html">Website</a>
or
<a href="../../models/NOGAPS/model_mod.html">local file</a>.</li>
<li>Documentation for the model:
<a href="http://www.srh.noaa.gov/ssd/nwpmodel/html/nogover.htm">NOGAPS</a>.
</li></ul>
</li>
<br /> 

<li>SQG Surface Quasi-Geostrophic Model
<ul><li>Dart interface documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/SQG/model_mod.html">Website</a>
or
<a href="../../models/SQG/model_mod.html">local file</a>.</li>
<li>Documentation for the model:
<a href="http://dx.doi.org/10.1175/1520-0469(2000)057<2951:RONGAN>2.0.CO%3B2">Paper 
on SQG model</a>.
</li></ul>
</li>


</ul>

<p>
The <em class=file>DART/models/template</em> directory contains sample
files for adding a new model.  See 
<a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#adding_a_model">
this section</a> of the DART web pages for more help on adding a new model.
</p>

<!--==================================================================-->

<a name="ChangedModels"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>Changed Models</h2>

<ul>

<li>WRF
<ul>
<li>Allow advanced microphysics schemes (needed interpolation for 7 new kinds)</li>
<li>Interpolation in the vertical is now done in log(p) instead of linear
pressure space.  log(p) is the default, but a compile-time variable can
restore the linear interpolation.</li>
<li>Added support in the namelist to avoid writing updated fields back into
the wrf netcdf files. The fields are still updated during the assimilation
but the updated data is not written back to the wrfinput file during the
dart_to_wrf step.</li>
<li>Fixed an obscure bug in the vertical convert routine of the wrf model_mod
that would occasionally fail to convert an obs. This would make tiny
differences in the output as the number of mpi tasks change. No quantitative
differences in the results but they were not bitwise compatible before and they
are again now.</li>
</ul>
</li>
<br /> 

<li>CAM
<ul>
<li>DART/CAM now runs under the CESM framework, so all options available
with the framework can be used.</li>
<li>Support for the SE core (HOMME) has been developed but is NOT part
of this release.  Please contact the <a href="mailto:dart@ucar.edu">DART
Development Group</a> if you have an interest in this configuration of CAM.</li>
</ul>
</li>
<br /> 

<li>Simple Advection Model
<ul>
<li>Fixed a bug where the random number generator was being
used before being called with an initial seed.</li>
</ul>
</li>

</ul>


<!--==================================================================-->

<a name="NewFOs"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>New Observation Types/Forward Operators</h2>

<ul>
<li>Many new observation types related to land and atmospheric chemistry
have been added.  See the <em class=file>obs_kind/obs_kind_mod.f90</em> for
a list of the generic kinds now available.</li>
<br />

<li>New forward operator for total precipitable water.  It loops over
model levels to compute the accumulated value.  See
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/obs_converters/tpw/tpw.html">Website</a>
or <a href="../../observations/obs_converters/tpw/tpw.html">local file</a>.
</li>
<br />

<li>New forward operator for COSMOS ground moisture observations. See
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/COSMOS/observations/obs_converters/COSMOS/COSMOS_to_obs.html">Website</a>
or <a href="../../observations/COSMOS/observations/obs_converters/COSMOS/COSMOS_to_obs.html">local file</a>.
</li>
<br />

<li>New forward operator for MIDAS total electron count observations. See
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/MIDAS/MIDAS.html">Website</a>
or <a href="../../observations/MIDAS/MIDAS.html">local file</a>.
</li>
<br />

<li>Added example of how to set additional metadata in an observation
to the <em code=file>obs_def_1d_state_mod.f90</em> file.
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/forward_operators/observations/forward_operators/obs_def_1d_state_mod.html">Website</a>
or <a href="../../obs_def_observations/forward_operators/obs_def_1d_state_mod.html">local file</a>.
</li>
<br />

</ul>

<!--==================================================================-->

<a name="NewObs"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>New Observation Types/Sources</h2>

<ul>
<li>MADIS<br />
Added a converter for wind profiler data to the set of existing MADIS converters.
More scripting support in the MADIS obs converters; more error checks
added to the rawin converter.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/observations/obs_converters/MADIS/MADIS.html">Website</a>
or <a href="../../observations/observations/obs_converters/MADIS/MADIS.html">local file</a>.
</li>
<br />

<li>Ameriflux<br />
Added an obs_sequence converter for Ameriflux land observations of latent
heat flux, sensible heat flux, net ecosystem production).
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/obs_converters/Ameriflux/level4_to_obs.html">Website</a>
or <a href="../../observations/obs_converters/Ameriflux/level4_to_obs.html">local file</a>.
</li>
</li>
<br />


<li>MODIS<br />
Added an obs_sequence converter for MODIS snow coverage measurements.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/obs_converters/snow/snow_to_obs.html">Website</a>
or <a href="../../observations/obs_converters/snow/snow_to_obs.html">local file</a>.
</li>
<br />

<li>COSMOS<br />
Added an obs_sequence converter for COSMOS ground moisture observations.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/COSMOS/observations/obs_converters/COSMOS/COSMOS_to_obs.html">Website</a>
or <a href="../../observations/COSMOS/observations/obs_converters/COSMOS/COSMOS_to_obs.html">local file</a>.
</li>
<br />

<li>MIDAS<br />
Added an obs_sequence converter for MIDAS observations of Total Electron Count.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/obs_converters/MIDAS/MIDAS_to_obs.html">Website</a>
or <a href="../../observations/obs_converters/MIDAS/MIDAS_to_obs.html">local file</a>.
</li>
<br />

<li>GPS<br />
Updated scripts for the GPS converter; added options to convert data from
multiple satellites.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/observations/obs_converters/gps/gps.html">Website</a>
or <a href="../../observations/observations/obs_converters/gps/gps.html">local file</a>.
</li>
<br />

<li>wrf_dart_obs_preprocess<br />
Added processing for wind profiler observation to the
wrf_dart_obs_preprocess program.
Documentation
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/models/wrf/WRF_DART_utilities/wrf_dart_obs_preprocess.html">Website</a>
or <a href="../../models/wrf/WRF_DART_utilities/wrf_dart_obs_preprocess.html">local file</a>.
</li>
<br />

<li>AIRS<br />
Fix BUG in AIRS converter - the humidity obs are accumulated across the
layers and so the best location for them is the layer midpoint and not on the
edges (levels) as the temperature obs are. Also fixed off-by-one error where
the converter would make one more obs above the requested top level.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/observations/obs_converters/AIRS/AIRS.html">Website</a>
or <a href="../../observations/observations/obs_converters/AIRS/AIRS.html">local file</a>.
</li>
<br />

<li>GTS<br />
Made gts_to_dart converter create separate obs types for surface dewpoint
vs obs aloft because they have different vertical coordinates.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/observations/obs_converters/GTSPP/GTSPP.html">Website</a>
or <a href="../../observations/observations/obs_converters/GTSPP/GTSPP.html">local file</a>.
</li>
<br />

<li>Tape Archive scripts<br />
Converted mss commands to hpss commands for a couple observation
converter shell scripts (inc AIRS).</li>
<br />

<li>Evenly distributed obs<br />
New matlab code to generate evenly spaced observations on the surface of
a sphere (e.g. the globe).
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/even_sphere/README">Website</a>
or <a href="../../observations/even_sphere/README">local file</a>.
</li>
<br />

<li>observation utilities<br />
Added obs_loop.f90 example file in obs_sequence directory; example
template for how to construct special purpose obs_sequence tools.
Documentation (source)
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/obs_sequence/obs_loop.f90">Website</a>
or <a href="../../obs_sequence/obs_loop.f90">local file</a>.
</li>
<br />

<li>PREPBUFR<br />
Change the default in the script for the prepbufr converter so it will
swap bytes, since all machines except ibms will need this now.
Documentation 
<a href="https://svn-dares-dart.cgd.ucar.edu/DART/trunk/observations/observations/obs_converters/NCEP/prep_bufr/prep_bufr.html">Website</a>
or <a href="../../observations/observations/obs_converters/NCEP/prep_bufr/prep_bufr.html">local file</a>.
</li>
<br />

</ul>

<!--==================================================================-->


<a name="NewDiagnostics"></a>
<h2>New Diagnostics and Documentation</h2>

<p>
<strong>Better Web Pages.</strong>
We've put a lot of effort into expanding our documentation.
For example, please check out 
<a href="http://www.image.ucar.edu/DAReS/DART/DART_Documentation.php#mat_obs">
the Matlab diagnostics section</a> or the pages outlining the 
<a href="http://www.image.ucar.edu/DAReS/DART/DART_Observations.php#obs_seq_overview">
observation sequence file contents</a>.
<br />
<br />
But there's always more to add.
<strong>Please <a href="http://www2.image.ucar.edu/forms/dart-suggestion-box">let us know</a> where we are lacking.</strong>
</p>

<p>Other new stuff:</p>
<ul>
<li>Handle empty epochs in the obs_seq_to_netcdf converter.</li>
<li>Added a matlab utility to show the output of a 'hop' test (running a
model for a continuous period vs. stopping and restarting a run).</li>
<li>Improved the routine that computes axes tick values in plots with
multiple values plotted on the same plot.</li>
<li>The obs_common_subset program can select common observations from up to 4
observation sequence files at a time.</li>
<li>Add code in obs_seq_verify to ensure that the ensemble members are in the
same order in all netcdf files.</li>
<li>Added support for the unstructured grids of mpas to our matlab  diagnostics.</li>
<li>Fix to writing of ReportTime in obs_seq_coverage.</li>
<li>Fixed logic in obs_seq_verify when determining the forecast lat.</li>
<li>Fixed loops inside obs_seq_coverage which were using the wrong limits on
the loops. Fixed writing of 'ntimes' in output netcdf variable.</li>
<li>Rewrote the algorithm in the obs_selection tool so it had better scaling
with large numbers of obs.</li>
<li>Several improvements to the 'obs_diag' program:
<ul>
<li>Added preliminary support for a list of 'trusted obs' in the obs_diag
program.</li>
<li>Can disable the rank histogram generation with a namelist item.</li>
<li>Can define height_edges or heights in the namelist, but not both.</li>
<li>The 'rat_cri' namelist item (critical ratio) has been deprecated.</li>
</ul>
</li>
<li>Extend obs_seq_verify so it can be used for forecasts from a single
member. minor changes to obs_selection, obs_seq_coverage and obs_seq_verify
to support a single member.</li>
<li>Added Matlab script to read/print timestamps from binary dart restart/ic
files.</li>
<li>Default for obs_seq_to_netcdf in all the namelists is now 'one big time
bin' so you don't have to know the exact timespan of an obs_seq.final file
before converting to netCDF.</li>
</ul>


<!--==================================================================-->

<a name="NewUtilities"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>New Utilities</h2>

<p>
This section describes
updates and changes to the tutorial materials,
scripting, setup, and build information
since the Kodiak release.
</p>


<ul>
<li>The mkmf-generated Makefiles now take care of calling 'fixsystem' if
needed so the mpi utilities code compiles without further user
intervention for any compiler.</li>
<li>Make the default input.nml for the Lorenz 96 and Lorenz 63 model gives
good assimilation results. Rename the original input.nml to
input.workshop.nml. The workshop_setup script renames it back before doing
anything else so this won't break the workshop instructions. Simplify all the
workshop_setup.csh scripts to do the minimal work needed by the DART
tutorial.</li>
<li>Updates to the models/template directory with the start of a full 3d
geophysical model template. Still under construction.</li>
<li>Move the pdf files in the tutorial directory up a level.  Removed
framemaker source files because we no longer have access to a working
version of the Framemaker software.  Moved routines that generate figures
and diagrams to a non-distributed directory of the subversion repository.</li>
<li>Enable netCDF large file support in the work/input.nml for models which
are likely to have large state vectors.</li>
<li>Minor updates to the doc.css file, make pages look identical in the
safari and firefox browsers.</li>
<li>Added a utility that sorts and reformats namelists, culls all comments to
the bottom of the file. Useful for doing diffs and finding duplicated
namelists in a file.</li>
<li>Cleaned up mkmf files - removed files for obsolete platforms and
compilers, updated suggested default flags for intel.</li>
<li>Update the mkmf template for gfortran to allow fortran source lines
longer than 132 characters.</li>
</ul>


<!--==================================================================-->

<a name="KnownProblems"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>Known Problems</h2>

<ul>
<li>none.
</li>
</ul>

<!--==================================================================-->
<!-- Legalese & Metadata                                              -->
<!--==================================================================-->

<a name="Legalese"></a>
<div class="top">[<a href="#">top</a>]</div><hr />
<h2>Terms of Use</h2>

<p>
DART software - Copyright UCAR. This open source software is provided
by UCAR, "as is", without charge, subject to all terms of use at
<a href="http://www.image.ucar.edu/DAReS/DART/DART_download">
http://www.image.ucar.edu/DAReS/DART/DART_download</a>
</p>

<table border=0 cellpadding=0 width=100% summary="">
<tr><td valign=top>Contact:       </td><td> DART core group   </td></tr>
<tr><td>Revision:      </td><td> $Revision: 10979 $ </td></tr>
<tr><td>Source:        </td><td> $URL: https://svn-dares-dart.cgd.ucar.edu/DART/branches/rma_trunk/documentation/html/Manhattan_release.html $ </td></tr>
<tr><td>Change Date:   </td><td> $Date: 2017-02-01 13:07:34 -0700 (Wed, 01 Feb 2017) $ </td></tr>
<tr><td valign=top>Change&nbsp;history:&nbsp;</td><td> try "svn&nbsp;log" or "svn&nbsp;diff" </td></tr>
</table>

<!--==================================================================-->

</body>
</html>
